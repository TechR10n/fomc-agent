@startuml c4-containers
!theme cyborg
skinparam backgroundColor #020A20
skinparam defaultFontColor #ffffff
skinparam arrowColor #387CF1
skinparam rectangleBorderColor #387CF1
skinparam rectangleBackgroundColor #0a1628
skinparam cloudBorderColor #6b7280
skinparam cloudBackgroundColor #111d35
skinparam databaseBorderColor #387CF1
skinparam databaseBackgroundColor #0a1628
skinparam queueBorderColor #f59e0b
skinparam queueBackgroundColor #1a1505
skinparam componentBorderColor #387CF1
skinparam componentBackgroundColor #111d35
skinparam titleFontColor #ffffff

left to right direction
title FOMC Agent â€” Components\n4-step Pipeline on AWS (conceptual)

cloud "BLS LABSTAT" as BLS
cloud "DataUSA API" as DataUSA

rectangle "Ingest (raw)" as Ingest {
  component "data-fetcher\nLambda" as Fetcher
  component "_sync_state\n(manifests/logs)" as Sync
}

rectangle "Parse & Update (processed)" as Parse {
  component "parser job\n(Lambda/Glue/Job)" as Parser
  component "schema/contracts" as Schema
}

rectangle "Enrich (curated)" as Enrich {
  component "enricher job\n(Lambda/Glue/Spark)" as Enricher
  component "report builder\n(JSON artifacts)" as Reports
}

rectangle "CDC & Triggers" as CDC {
  queue "SQS" as Q
  queue "DLQ" as DLQ
  component "event filters\n(suffix/prefix)" as Filters
}

database "S3 Raw\n(bls-raw, datausa-raw)" as Raw
database "S3 Processed\n(bls-processed, datausa-processed)" as Processed
database "S3 Curated / Serving" as Curated
database "S3 Static Site" as Site

BLS --> Fetcher
DataUSA --> Fetcher
Fetcher --> Raw : write raw bytes
Fetcher --> Sync : write state + logs

Raw --> Filters : object created events
Filters --> Q : enqueue work
Q -[dashed]-> DLQ : after retries

Q --> Parser : trigger (raw changed)
Parser --> Processed : write clean tables
Schema -[dotted]-> Parser : validates

Q --> Enricher : trigger (processed/curated)
Enricher --> Curated : write enriched dataset
Enricher --> Reports
Reports --> Site : publish JSON\nfor charts

@enduml
