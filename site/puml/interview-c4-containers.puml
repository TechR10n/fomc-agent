@startuml interview-c4-containers
!theme plain
left to right direction
title Interview â€” Containers / Components\n4-step Pipeline on AWS (conceptual)

cloud "BLS LABSTAT" as BLS #F5F5F5
cloud "DataUSA API" as DataUSA #F5F5F5

rectangle "Ingest (raw)" as Ingest #E8F5E9 {
  component "data-fetcher\nLambda" as Fetcher
  component "_sync_state\n(manifests/logs)" as Sync
}

rectangle "Parse & Update (silver)" as Parse #E3F2FD {
  component "parser job\n(Lambda/Glue/Job)" as Parser
  component "schema/contracts" as Schema
}

rectangle "Enrich (gold)" as Enrich #FFF8E1 {
  component "enricher job\n(Lambda/Glue/Spark)" as Enricher
  component "report builder\n(JSON artifacts)" as Reports
}

rectangle "CDC & Triggers" as CDC #FFF3E0 {
  queue "SQS" as Q
  queue "DLQ" as DLQ
  component "event filters\n(suffix/prefix)" as Filters
}

database "S3 Raw\n(bls-raw, datausa-raw)" as Raw #E8F5E9
database "S3 Silver\n(bls-silver, datausa-silver)" as Silver #E8F5E9
database "S3 Gold / Serving" as Gold #E8F5E9
database "S3 Static Site" as Site #F3E5F5

BLS --> Fetcher
DataUSA --> Fetcher
Fetcher --> Raw : write raw bytes
Fetcher --> Sync : write state + logs

Raw --> Filters : object created events
Filters --> Q : enqueue work
Q -[dashed]-> DLQ : after retries

Q --> Parser : trigger (raw changed)
Parser --> Silver : write clean tables
Schema -[dotted]-> Parser : validates

Q --> Enricher : trigger (silver/gold)
Enricher --> Gold : write enriched dataset
Enricher --> Reports
Reports --> Site : publish JSON\nfor charts

@enduml

