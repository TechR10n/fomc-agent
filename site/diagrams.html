<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Diagrams — FOMC Agent Lab</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%23020A20' width='100' height='100' rx='20'/><text x='50' y='68' font-size='50' text-anchor='middle' fill='%23387CF1'>F</text></svg>" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <nav>
    <a class="brand" href="index.html">FOMC Agent</a>
    <a href="index.html">Home</a>
    <a href="charts.html">Charts</a>
    <a href="pipeline.html">Pipeline</a>
    <a href="architecture.html">Architecture</a>
    <a class="active" href="diagrams.html">Diagrams</a>
    <a href="design.html">Docs</a>
    <a href="about.html">About</a>
  </nav>

  <div class="container">
    <div class="page-header">
      <h1>PlantUML Diagrams</h1>
      <p class="subtitle">Client-ready visuals: architecture, sequence, deployment, failures, and alternatives.</p>
    </div>

    <div class="card prose">
      <h2>How to regenerate</h2>
      <p class="muted">These SVGs are generated from PlantUML (<code>.puml</code>) sources.</p>
      <pre><code># from repo root:
mkdir -p site/diagrams site/puml
cp docs/*.puml docs/portfolio/*.puml site/puml/
plantuml -tsvg docs/*.puml -o ../site/diagrams
plantuml -tsvg docs/portfolio/*.puml -o ../../site/diagrams</code></pre>
      <p class="muted">Tip: open the <code>.puml</code> sources in <code>docs/</code> to customize labels for your presentation.</p>
    </div>

    <div class="card prose">
      <h2>Gallery</h2>
      <p class="muted">Click a diagram to open it full-screen (or use “Open SVG” to zoom in a new tab). Click “Show source” to view the PlantUML that generated each diagram.</p>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">Deployment Architecture</h3>
      <img class="diagram-img" src="diagrams/deployment.svg" alt="Deployment architecture diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/deployment.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">Stack Architecture (CDK)</h3>
      <img class="diagram-img" src="diagrams/architecture-stacks.svg" alt="CDK stack architecture diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/architecture-stacks.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">FOMC Agent: System Context</h3>
      <img class="diagram-img" src="diagrams/c4-context.svg" alt="System context diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/c4-context.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">FOMC Agent: Components</h3>
      <img class="diagram-img" src="diagrams/c4-containers.svg" alt="Containers and components diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/c4-containers.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">End-to-End Sequence</h3>
      <img class="diagram-img" src="diagrams/data-flow-sequence.svg" alt="End-to-end data flow sequence diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/data-flow-sequence.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">Hourly AWS Runtime Sequence</h3>
      <img class="diagram-img" src="diagrams/aws-hourly-runtime-sequence.svg" alt="Hourly AWS runtime sequence diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/aws-hourly-runtime-sequence.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">AWS Flow (allowmixing Component + Deployment)</h3>
      <img class="diagram-img" src="diagrams/aws-allowmixing-component-deployment.svg" alt="AWS allowmixing component and deployment flow diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/aws-allowmixing-component-deployment.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">AWS Observability Flow</h3>
      <img class="diagram-img" src="diagrams/aws-observability-flow.svg" alt="AWS observability flow diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/aws-observability-flow.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">LocalStack + Synth Flow</h3>
      <img class="diagram-img" src="diagrams/localstack-synth-sequence.svg" alt="LocalStack synth sequence diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/localstack-synth-sequence.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">GitHub Actions Validate + Deploy</h3>
      <img class="diagram-img" src="diagrams/github-actions-deploy-sequence.svg" alt="GitHub Actions validate and deploy sequence diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/github-actions-deploy-sequence.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">FOMC Agent: Data Model</h3>
      <img class="diagram-img" src="diagrams/data-model.svg" alt="Data model diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/data-model.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">FOMC Agent: Reliability (SQS + DLQ)</h3>
      <img class="diagram-img" src="diagrams/failure-retry.svg" alt="Failure and retry diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/failure-retry.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">FOMC Agent: Orchestration</h3>
      <img class="diagram-img" src="diagrams/orchestration.svg" alt="Orchestration diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/orchestration.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">FOMC Agent: Environments</h3>
      <img class="diagram-img" src="diagrams/localstack-vs-aws.svg" alt="LocalStack versus AWS diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/localstack-vs-aws.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">Alternative: Databricks (Lakehouse)</h3>
      <img class="diagram-img" src="diagrams/alt-databricks.svg" alt="Databricks alternative architecture diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/alt-databricks.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">Alternative: Google Cloud Platform (GCP)</h3>
      <img class="diagram-img" src="diagrams/alt-gcp.svg" alt="GCP alternative architecture diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/alt-gcp.puml">Loading…</code></pre>
      </details>
    </div>

    <div class="diagram-container">
      <h3 style="margin-top:0;">Alternative: Microsoft Azure</h3>
      <img class="diagram-img" src="diagrams/alt-azure.svg" alt="Azure alternative architecture diagram" />
      <details class="code-details">
        <summary>Show source</summary>
        <pre><code data-puml="puml/alt-azure.puml">Loading…</code></pre>
      </details>
    </div>
  </div>

  <script>
    (async function loadPumlSources() {
      const blocks = Array.from(document.querySelectorAll("code[data-puml]"));
      await Promise.all(blocks.map(async (el) => {
        const path = el.getAttribute("data-puml");
        try {
          const resp = await fetch(path, { cache: "no-store" });
          if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
          el.textContent = await resp.text();
        } catch (e) {
          el.textContent = `Failed to load ${path}: ${e}`;
        }
      }));
    })();
  </script>

  <script src="lightbox.js"></script>
</body>
</html>
